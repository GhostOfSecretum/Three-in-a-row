# üì¶ –®–∞–±–ª–æ–Ω Base Mini App - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–º, –∫–∞–∫ –±—ã–ª —Å–æ–∑–¥–∞–Ω —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –ª–µ–≥–∫–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

## üìã –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ Next.js –ø—Ä–æ–µ–∫—Ç–∞
npx create-next-app@latest my-project --typescript --tailwind --app

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
mkdir my-project
cd my-project
npm init -y
npm install next@^14.0.0 react@^18.2.0 react-dom@^18.2.0
npm install -D @types/node @types/react @types/react-dom typescript tailwindcss postcss autoprefixer
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install @farcaster/miniapp-sdk@0.2.1
```

### 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã:

1. **`minikit.config.ts`** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Base Mini App
   - –°–æ–¥–µ—Ä–∂–∏—Ç `accountAssociation` –∏ `miniapp` –æ–±—ä–µ–∫—Ç—ã
   - ROOT_URL –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

2. **`app/.well-known/farcaster.json/route.ts`** - Manifest endpoint
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å accountAssociation –∏ miniapp
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∞: `{ accountAssociation: {...}, miniapp: {...} }`

3. **`app/layout.tsx`** - Root layout
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `generateMetadata` –¥–ª—è embed metadata
   - –î–æ–±–∞–≤–ª—è–µ—Ç `fc:miniapp` –∏ `base:app_id` —á–µ—Ä–µ–∑ `other`

4. **`app/components/BaseMeta.tsx`** - SDK –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
   - –í—ã–∑—ã–≤–∞–µ—Ç `sdk.actions.ready()` –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è splash screen
   - –û–±—è–∑–∞—Ç–µ–ª–µ–Ω —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Base

5. **`app/page.tsx`** - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - –í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–¥–µ—Å—å

### 4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### `minikit.config.ts` —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:

```typescript
const ROOT_URL = 'https://your-app.vercel.app';

export const minikitConfig = {
  accountAssociation: {
    "header": "",
    "payload": "",
    "signature": ""
  },
  miniapp: {
    version: "1",
    name: "–ù–∞–∑–≤–∞–Ω–∏–µ",
    homeUrl: ROOT_URL,
    iconUrl: `${ROOT_URL}/icon.svg`,
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
  },
} as const;
```

#### `app/layout.tsx` —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:

```typescript
export async function generateMetadata(): Promise<Metadata> {
  return {
    other: {
      'fc:miniapp': JSON.stringify({
        version: 'next',
        imageUrl: '...',
        button: {
          title: '...',
          action: {
            type: 'launch_miniapp',
            url: '...',
            // ...
          },
        },
      }),
      'base:app_id': 'your-app-id',
    },
  };
}
```

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è (–ø–æ–≤—Ç–æ—Ä—è–µ–º—ã–π)

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
```bash
npm install
npm run build  # –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è
```

### –®–∞–≥ 2: GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```bash
git init
git add .
git commit -m "Initial commit"
git remote add origin https://github.com/USERNAME/REPO.git
git push -u origin main
```

### –®–∞–≥ 3: –î–µ–ø–ª–æ–π –Ω–∞ Vercel
1. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ Vercel
2. –î–µ–ø–ª–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π

### –®–∞–≥ 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
1. –û–±–Ω–æ–≤–∏—Ç—å ROOT_URL –≤ `minikit.config.ts`
2. –ó–∞–ø—É—à—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –®–∞–≥ 5: Account Association
1. –û—Ç–∫–ª—é—á–∏—Ç—å Deployment Protection –≤ Vercel
2. –°–æ–∑–¥–∞—Ç—å accountAssociation –Ω–∞ base.dev
3. –û–±–Ω–æ–≤–∏—Ç—å –≤ `minikit.config.ts`
4. –ó–∞–ø—É—à—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –®–∞–≥ 6: –ü—É–±–ª–∏–∫–∞—Ü–∏—è
1. –°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç –≤ Base app —Å URL
2. –ì–æ—Ç–æ–≤–æ!

## üìù –®–∞–±–ª–æ–Ω—ã –∫–æ–¥–∞

### Manifest endpoint (–≤—Å–µ–≥–¥–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π):

```typescript
import { NextResponse } from 'next/server';
import { minikitConfig } from '@/minikit.config';

export async function GET() {
  const manifest = {
    accountAssociation: minikitConfig.accountAssociation,
    miniapp: minikitConfig.miniapp,
  };

  return NextResponse.json(manifest, {
    headers: {
      'Content-Type': 'application/json; charset=utf-8',
      'Cache-Control': 'no-cache, no-store, must-revalidate, max-age=0',
      'Access-Control-Allow-Origin': '*',
    },
  });
}
```

### BaseMeta –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (–≤—Å–µ–≥–¥–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π):

```typescript
'use client';
import { useEffect } from 'react';
import { sdk } from '@farcaster/miniapp-sdk';

export default function BaseMeta() {
  useEffect(() => {
    sdk.actions.ready().catch(() => {});
  }, []);
  return null;
}
```

### Layout —Å metadata:

```typescript
import type { Metadata } from 'next';
import { minikitConfig } from '@/minikit.config';
import BaseMeta from './components/BaseMeta';

export async function generateMetadata(): Promise<Metadata> {
  return {
    title: minikitConfig.miniapp.name,
    description: minikitConfig.miniapp.description,
    other: {
      'fc:miniapp': JSON.stringify({
        version: 'next',
        imageUrl: minikitConfig.miniapp.ogImageUrl,
        button: {
          title: `–û—Ç–∫—Ä—ã—Ç—å ${minikitConfig.miniapp.name}`,
          action: {
            type: 'launch_miniapp',
            name: minikitConfig.miniapp.name,
            url: minikitConfig.miniapp.homeUrl,
            splashImageUrl: minikitConfig.miniapp.splashImageUrl,
            splashBackgroundColor: minikitConfig.miniapp.splashBackgroundColor,
          },
        },
      }),
      'base:app_id': 'your-app-id-from-base-dev',
    },
  };
}

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="ru">
      <body>
        <BaseMeta />
        {children}
      </body>
    </html>
  );
}
```

## üéØ –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:

1. **SDK –∏ ready()** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å `sdk.actions.ready()`
2. **Manifest —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** - `{ accountAssociation: {...}, miniapp: {...} }`
3. **Embed metadata** - —á–µ—Ä–µ–∑ `generateMetadata` —Å `other: { 'fc:miniapp': ... }`
4. **Action type** - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `launch_miniapp` (–Ω–µ `launch_frame`)
5. **base:app_id** - –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `other` –≤ metadata

### –í–∞–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏:

- Manifest endpoint –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ –ø—É—Ç–∏ `/.well-known/farcaster.json`
- –í—Å–µ URL –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–ª–Ω—ã–º–∏ (—Å https://)
- accountAssociation —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–∞ base.dev (–Ω–µ base.org/build)
- Signature –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–º (Farcaster) –∏–ª–∏ –¥–ª–∏–Ω–Ω—ã–º (Base Account)
- Deployment Protection –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏

## üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
#!/bin/bash
# create-base-miniapp.sh

PROJECT_NAME=$1

if [ -z "$PROJECT_NAME" ]; then
  echo "Usage: ./create-base-miniapp.sh project-name"
  exit 1
fi

# –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω
cp -r my-project $PROJECT_NAME
cd $PROJECT_NAME

# –û–±–Ω–æ–≤–∏—Ç—å package.json
sed -i '' "s/base-mini-app/$PROJECT_NAME/g" package.json

# –£–¥–∞–ª–∏—Ç—å git –∏—Å—Ç–æ—Ä–∏—é
rm -rf .git
git init

echo "‚úÖ –ü—Ä–æ–µ–∫—Ç $PROJECT_NAME —Å–æ–∑–¥–∞–Ω!"
echo "üìù –û–±–Ω–æ–≤–∏—Ç–µ minikit.config.ts –∏ —Å–æ–∑–¥–∞–π—Ç–µ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
```

## üìö –°—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

- [Base Mini Apps Docs](https://docs.base.org/mini-apps)
- [Migrate Existing App](https://docs.base.org/mini-apps/quickstart/migrate-existing-apps)
- [Embeds & Previews](https://docs.base.org/mini-apps/core-concepts/embeds-and-previews)

---

**–≠—Ç–æ—Ç —à–∞–±–ª–æ–Ω –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ª—é–±—ã—Ö Base Mini Apps!**

